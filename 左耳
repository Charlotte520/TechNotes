22.分布式系统难点
故障在不同服务间转移；服务配额、限流；监控、查错难；服务发现、治理复杂。
异构系统的不标准问题：通讯协议；数据格式；软件、应用；开发、运维过程。配置管理，分3层：底层、os相关；中间件相关 --形成模板供选择；业务应用相关。
服务依赖：定义服务的关键程度，关键业务主要调用路径。
故障：减小恢复时间；影响面。关键指标。自动恢复故障。

23.技术栈
增加系统容量：集群，将并发负载分配到不同机器。提高可用性：流量过大时降级。
性能：
cache：分区；更新；命中
负载均衡：路由，发现
异步调用：msg queue，持久化；事务
数据镜像：同步，读写分离，数据一致性
数据分区：分区策略；访问层；一致性。

稳定性：
服务拆分：隔离故障；重用基础模块。治理；调用；依赖；隔离
冗余：去除单点，弹性伸缩（有状态服务，要数据复制、重新分片，迁移数据）；故障迁移；发现
限流降级：停一部分服务，拒绝一部分用户。熔断；降级控制
高可用：去单点。多租户；灾备多活；

24.监控
全栈监控：基础层：cpu、内存、网络、磁盘等。中间层：中间件监控。应用层：业务 qps、latency、response code。log结构化；监控数据标准格式；统一监控平台。
关联分析；跨系统调用串联；实时报警、自动处理；性能分析。

25.服务调度
有多少种服务？各服务版本？服务实例数，状态（deploying，running，error，rollup，rollback，scaling，removing）？
扩容：先扩展机器节点；部署服务；启动；检查服务健康状态；加入服务发现；调度流量。
故障迁移：stateful服务，重启救活。无状态服务，生成新实例。

26.流量&数据调度
流量管理、控制。
多数据副本一致性方案：master-slave；master-master；2pc，3pc；paxos。应用层分布式事务：2pc。存储层通过paxos、raft、nwr解决。

27.paas
服务模块重用；多租户、服务编排；自动部署，伸缩；
